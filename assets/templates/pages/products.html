<div class="products-header">
    <h1>Sản phẩm</h1>
    <div class="products-filter">
        <form method="GET" action="/Music-Store/products.php" class="filter-form">
            <div class="form-group">
                <label for="category">Danh mục:</label>
                <select name="category" id="category" class="form-control">
                    <option value="">Tất cả</option>
                    {{#each categories}}
                        <option value="{{id}}" {{#if selected}}selected{{/if}}>{{name}}</option>
                    {{/each}}
                </select>
            </div>

            <div class="form-group">
                <label for="sort">Sắp xếp:</label>
                <select name="sort" id="sort" class="form-control">
                    <option value="name_asc" {{#if sort_name_asc}}selected{{/if}}>Tên A-Z</option>
                    <option value="name_desc" {{#if sort_name_desc}}selected{{/if}}>Tên Z-A</option>
                    <option value="price_asc" {{#if sort_price_asc}}selected{{/if}}>Giá tăng dần</option>
                    <option value="price_desc" {{#if sort_price_desc}}selected{{/if}}>Giá giảm dần</option>
                </select>
            </div>

            <button type="submit" class="btn btn-primary">Lọc</button>
        </form>
    </div>
</div>

{{error_message}}
{{success_message}}

<div class="products-grid">
    {{products_list}}
</div>

<div class="pagination">
    {{pagination}}
</div>

<script>
    // Xử lý filter sản phẩm
    document.getElementById('category').addEventListener('change', function() {
        const category = this.value;
        window.location.href = `/Music-Store/products.php?category=${category}`;
    });

    document.getElementById('sort').addEventListener('change', function() {
        const sort = this.value;
        const urlParams = new URLSearchParams(window.location.search);
        urlParams.set('sort', sort);
        window.location.href = `/Music-Store/products.php?${urlParams.toString()}`;
    });
</script> 